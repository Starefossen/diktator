# Based on nginx-micro default config
# Adapted for Next.js static export

worker_processes  1;
error_log  /dev/stdout warn;
pid        /nginx.pid;

events { worker_connections  1024; }

http {
    include       mime.types;
    default_type  application/octet-stream;
    access_log    /dev/stdout;

    sendfile      on;
    keepalive_timeout  65;

    server {
        listen       8080 default_server;
        server_name  _;

        root   /www;
        index  index.html;

        # Next.js static export routing
        location / {
            try_files $uri $uri.html $uri/index.html /index.html;
        }

        # Health check
        location /health {
            return 200 "healthy\n";
        }
    }
}
